<!DOCTYPE html>
<html>
  <head>
    <title>Page template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
    
    <link href="skin/blue.monday/jplayer.blue.monday.css" rel="stylesheet" type="text/css" />
    
    <link href="http://s.npr.org/templates/css/fonts/GothamSSm.css" rel="stylesheet" type="text/css" />
    
    <style type="text/css">
    	h1 {
			font-family: 'Gotham SSm',Helvetica,Arial,sans-serif;
			font-weight: 400;
			text-transform: uppercase;
			}
			
			
			h3 {
			font-family: 'Gotham SSm',Helvetica,Arial,sans-serif;
			font-weight: 700;
			font-size: 70px;
			text-align: center;
			margin: 40px 0;
			}

	p {
	font-size: 20px; 
	line-height: 2; 
	margin: 20px 0;
	color: #666;
	}
	
	.video-container {margin: 80px 0;}
			
	div.jp-video-360p {width: 100%; position: relative;} 

		a.jp-video-play-icon {
			margin: auto;
			position: absolute;
			top: 0; 
			left: 0; 
			bottom: 0; 
			right: 0;
			width: 80px;
			height: 80px;
			background: url("skin/blue.monday/playicon.png") 0 0 no-repeat;
			text-indent:-9999px;
		}

		#subtitle-overlay {
		position: absolute;
		bottom: 50px;
		left: 0;
		color: #fff;
		width: 100%;
		} 
		
		#subtitle-overlay div {
			text-align: center;
			font-size: 20px;
			font-family: helvetica, arial, sans-serif;
		}
		
		#story {
            z-index: 2;
            position: relative;
            background-color: #fff;
            padding: 40px 0;
        }
    
        /* big video */
        
           #video-wrapper { 
            position: relative;
            overflow: hidden;
        }
        #video-wrapper iframe {
/*            position: absolute; */
        }
        
        #video-wrapper h1 {
            display: table;
            text-align: center;
            vertical-align: middle;
            position: absolute;
            top: 40%;
            width: 100%;
            color: #fff;
            font-size: 130px;
            z-index: 100;
            text-shadow: 0px 2px 2px rgba(0,0,0,0.5);
        }
        
        #story {
            z-index: 2;
            position: relative;
            background-color: #fff;
            padding: 40px 0;
			border-top: 10px solid #000;
			margin-top: -10px;
        }
        
    </style>
    
  </head>
  <body>
  
    <div id="video-wrapper">
        <iframe id="video" src="http://player.vimeo.com/video/61487989?title=0&amp;byline=0&amp;portrait=0&amp;api=1&amp;loop=1;player_id=video" width="400" height="225" frameborder="0"></iframe>
        <!-- IMPORTANT: include the "player_id" param with the ID of your iframe. So: player_id=video -->
       
        <h1>Bangladesh</h1>
    </div>
    
	<div id="story">
	
	 <div id="intro" class="container">
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>What's the project?</h3> 
                <p>Almost every single t-shirt out there -- from the cheesiest vacation tank top to the fanciest boutique designer tee -- is the result of a complicated global odyssey. We will take you on that odyssey and document the route our t-shirt took to your back. We'll meet the people who grow the cotton, spin the yarn, and cut and sew the fabric. We'll ride on the cargo ships that bring our t-shirt from factories in Bangladesh and Colombia to ports in the US. And we'll examine the crazy tangle of international regulations which govern the t-shirt trade the whole way.</p>
            </div>
        </div><!-- /.row -->  
    </div><!-- /.container -->
	
	<div class="video-container">
	
	<div id="jp_container_1" class="jp-video jp-video-360p">
			<div class="jp-type-single">
				<div id="jquery_jplayer_1" class="jp-jplayer"></div>
				
				
				<div class="jp-gui">
					<div class="jp-video-play">
						<a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>
					</div>
					<!--
					<ul class="jp-controls">
								<li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
								<li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
					</ul>
					-->
				</div>
				<div class="jp-no-solution">
					<span>Update Required</span>
					To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
				</div>
			</div>
		</div>
        
    </div><!-- /.video-container -->
    
    <div class="container">
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                <h3>What's Planet Money?</h3> 
                <p>Planet Money is a joint project of NPR and This American Life, which focuses on coverage of the global economy. Imagine you could call up a friend and say, "Meet me at the bar and tell me what's going on with the economy." Now imagine that's actually a fun evening. That's what we're going for at Planet Money.</p>
                
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

            </div>
        </div><!-- /.row -->  
    </div><!-- /.container -->
	</div><!-- /#content -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	
	<script type="text/javascript" src="js/popcorn.js"></script>
	<script type="text/javascript" src="js/popcorn.player.js"></script>
	<script type="text/javascript" src="js/popcorn.jplayer.js"></script>
	<script type="text/javascript" src="js/popcorn.subtitle.js"></script>
	
	<!-- vimeo js -->
	<script src="../js/libs/froogaloop2.min.js"></script>
	
	<script type="text/javascript" language="javascript">
	$(document).ready(function() {
		
		// big video
		var $w = $(window);
	    var $video = $('#video');
        var $iframe = $('#video')[0];
        var $player = $f($iframe);
	    var $player_wrapper = $('#video-wrapper');

        var player_offset = 60;
        
        function resize_window() {
            console.log('resize_window');
            var window_width = $w.width();
            var window_height = $w.height();
            console.log(window_width, window_height);

            var w = window_width + (player_offset * 2);
            var h = window_height + (player_offset * 2);

            $player_wrapper.width('100%');
            $player_wrapper.height(window_height + 'px');
            
            var optimal_width = ((window_height + (player_offset * 2)) * 16) / 9;
            var width_diff = optimal_width - window_width;
            console.log(optimal_width, window_width, width_diff);
            
            /*
            var optimal_height = (window_width * 9) / 16;
            var height_diff = optimal_height - window_height;
            console.log(optimal_height, window_height, height_diff);
            */
            
            if (width_diff > 0) {
                w = optimal_width;
            }

            $video.width(w);
            $video.height(h + 'px');
            $video.css('position', 'absolute');
            $video.css('top', (0 - player_offset) + 'px');
            $video.css('left', (0 - (width_diff / 2)) + 'px');
        }
        
        $w.on('resize', resize_window);
        resize_window();

        $player.addEvent('ready', function() {
            console.log('player ready');
            $player.api('setVolume', 0);
            $player.api('seekTo', 120);
            $player.api('play');
        });
		
        // popcorn and jplayer video
        
	        var p = Popcorn.jplayer('#jquery_jplayer_1', {
			media: {
				m4v: "http://argoproject.org/prototypes/seed/j1.mp4",
				webmv: "http://argoproject.org/prototypes/seed/jasmine.webm",
				//ogv: "http://www.jplayer.org/video/ogv/Big_Buck_Bunny_Trailer.ogv",
				poster: "http://argoproject.org/prototypes/seed/jasmine.jpg"
			},
			options: {
				swfPath: "js",
				supplied: "webmv, m4v",
				size: {
					width: "100%",
					height: "auto",
					cssClass: "jp-video-360p"
				},
				smoothPlayBar: true,
				keyEnabled: true
			}
		})
		.subtitle({
			start: 2,
			end: 6,
			text: "This text is the Popcorn Subtitle Plugin"
		})
		.subtitle({
			start: 6,
			end: 10,
			text: "Working with the Popcorn jPlayer Player Plugin"
		})
	
    });
	</script>
	
  </body>
</html>